# Startup Scripts - Implementation Summary

## åˆ›å»ºçš„è„šæœ¬ / Created Scripts

å·²åˆ›å»ºå®Œæ•´çš„æœåŠ¡ç®¡ç†è„šæœ¬é›†ï¼š

### æ ¸å¿ƒè„šæœ¬ / Core Scripts

| è„šæœ¬ | åŠŸèƒ½ | æ–‡ä»¶è·¯å¾„ |
|------|------|----------|
| `start.sh` | å®Œæ•´å¯åŠ¨ï¼ˆå¸¦æ£€æŸ¥ï¼‰ | `scripts/start.sh` |
| `start_dev.sh` | å¿«é€Ÿå¯åŠ¨ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ | `scripts/start_dev.sh` |
| `stop.sh` | åœæ­¢æœåŠ¡ | `scripts/stop.sh` |
| `restart.sh` | é‡å¯æœåŠ¡ | `scripts/restart.sh` |
| `status.sh` | çŠ¶æ€æ£€æŸ¥ | `scripts/status.sh` |

### æ–‡æ¡£ / Documentation

| æ–‡æ¡£ | è¯´æ˜ | æ–‡ä»¶è·¯å¾„ |
|------|------|----------|
| `scripts/README.md` | è„šæœ¬è¯¦ç»†æ–‡æ¡£ | `scripts/README.md` |
| `docs/STARTUP_SCRIPTS.md` | å®Œæ•´å¯åŠ¨æŒ‡å— | `docs/STARTUP_SCRIPTS.md` |

## å¿«é€Ÿä½¿ç”¨ / Quick Start

### 1. èµ‹äºˆæ‰§è¡Œæƒé™

```bash
chmod +x scripts/*.sh
```

### 2. é¦–æ¬¡å¯åŠ¨

```bash
./scripts/start.sh
```

### 3. æ—¥å¸¸å¼€å‘

```bash
# å¿«é€Ÿå¯åŠ¨
./scripts/start_dev.sh

# æŸ¥çœ‹çŠ¶æ€
./scripts/status.sh

# åœæ­¢æœåŠ¡
./scripts/stop.sh

# é‡å¯æœåŠ¡
./scripts/restart.sh
```

## åŠŸèƒ½ç‰¹æ€§ / Features

### start.sh - å®Œæ•´å¯åŠ¨è„šæœ¬

âœ… **ç¯å¢ƒæ£€æŸ¥**:
- Python ç‰ˆæœ¬æ£€æŸ¥
- .env é…ç½®æ£€æŸ¥
- Python ä¾èµ–æ£€æŸ¥
- Neo4j è¿æ¥æ£€æŸ¥
- ç«¯å£å ç”¨æ£€æŸ¥

âœ… **è‡ªåŠ¨åŒ–**:
- è‡ªåŠ¨åˆ›å»ºå¿…è¦ç›®å½•
- è‡ªåŠ¨å¤åˆ¶ .env.exampleï¼ˆå¦‚æœ .env ä¸å­˜åœ¨ï¼‰
- ä¿å­˜ PID æ–‡ä»¶ä¾¿äºç®¡ç†

âœ… **ç”¨æˆ·å‹å¥½**:
- å½©è‰²è¾“å‡ºï¼ˆç»¿è‰²=æˆåŠŸï¼Œçº¢è‰²=é”™è¯¯ï¼Œé»„è‰²=è­¦å‘Šï¼Œè“è‰²=ä¿¡æ¯ï¼‰
- æ¸…æ™°çš„æ­¥éª¤æç¤º
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
- æ”¯æŒ Ctrl+C ä¼˜é›…åœæ­¢

### start_dev.sh - å¿«é€Ÿå¯åŠ¨è„šæœ¬

âœ… **æç®€è®¾è®¡**:
- è·³è¿‡æ‰€æœ‰æ£€æŸ¥
- ç›´æ¥å¯åŠ¨æœåŠ¡
- é€‚åˆå¼€å‘ç¯å¢ƒé¢‘ç¹é‡å¯

### stop.sh - åœæ­¢è„šæœ¬

âœ… **å¤šç§åœæ­¢ç­–ç•¥**:
1. é€šè¿‡ PID æ–‡ä»¶åœæ­¢
2. é€šè¿‡ç«¯å£æŸ¥æ‰¾åœæ­¢
3. é€šè¿‡è¿›ç¨‹ååœæ­¢

âœ… **å®¹é”™æ€§**:
- è‡ªåŠ¨å°è¯•å¤šç§æ–¹æ³•
- å‹å¥½çš„é”™è¯¯æç¤º

### restart.sh - é‡å¯è„šæœ¬

âœ… **ç®€å•å¯é **:
- æ‰§è¡Œ stop.sh
- ç­‰å¾… 2 ç§’
- æ‰§è¡Œ start.sh

### status.sh - çŠ¶æ€æ£€æŸ¥è„šæœ¬

âœ… **å…¨é¢æ£€æŸ¥**:
- æœåŠ¡è¿è¡ŒçŠ¶æ€
- è¿›ç¨‹ PID
- è®¿é—®åœ°å€
- å¥åº·æ£€æŸ¥ï¼ˆ/health ç«¯ç‚¹ï¼‰
- Neo4j è¿æ¥çŠ¶æ€

## ä¿®å¤çš„é—®é¢˜ / Fixed Issues

### é—®é¢˜ 1: ç›¸å¯¹å¯¼å…¥é”™è¯¯

**åŸå› **: `backend/server.py` ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼ˆ`from .extraction import ...`ï¼‰ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œ

**è§£å†³**: ä½¿ç”¨ `python -m backend.server` ä½œä¸ºæ¨¡å—è¿è¡Œ

**ä¿®æ”¹çš„æ–‡ä»¶**:
- âœ… `scripts/start.sh`
- âœ… `scripts/start_dev.sh`
- âœ… `scripts/stop.sh`
- âœ… `scripts/start_with_phoenix.sh`
- âœ… `README.md`
- âœ… `README_CN.md`

### é—®é¢˜ 2: è¿›ç¨‹æŸ¥æ‰¾æ¨¡å¼

**ä¿®æ”¹**: `pgrep -f "python.*backend/server.py"` â†’ `pgrep -f "python.*backend\.server"`

ä»¥åŒ¹é…æ¨¡å—è¿è¡Œæ–¹å¼ã€‚

## æœåŠ¡æ¶æ„ / Service Architecture

KnowledgeWeaver é‡‡ç”¨**å•ä¸€æœåŠ¡æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI Backend (Port 9621)      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   API       â”‚  â”‚   Frontend   â”‚ â”‚
â”‚  â”‚  Endpoints  â”‚  â”‚  Static      â”‚ â”‚
â”‚  â”‚             â”‚  â”‚  Files       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Neo4j     â”‚  â”‚   ChromaDB   â”‚ â”‚
â”‚  â”‚  (External) â”‚  â”‚   (Embedded) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**åªéœ€å¯åŠ¨ä¸€ä¸ªæœåŠ¡å³å¯åŒæ—¶è®¿é—®å‰ç«¯å’Œåç«¯ï¼**

## è®¿é—®åœ°å€ / Access URLs

å¯åŠ¨æˆåŠŸåï¼š

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ç•Œé¢ | http://localhost:9621 | çŸ¥è¯†å›¾è°±å¯è§†åŒ– |
| API æ–‡æ¡£ | http://localhost:9621/docs | Swagger æ–‡æ¡£ |
| å¥åº·æ£€æŸ¥ | http://localhost:9621/health | æœåŠ¡å¥åº·çŠ¶æ€ |
| Neo4j Browser | http://localhost:7474 | å›¾æ•°æ®åº“ç®¡ç† |

## ç›®å½•ç»“æ„ / Directory Structure

```
KnowledgeWeaver/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ start.sh          # å®Œæ•´å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start_dev.sh      # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ stop.sh           # åœæ­¢è„šæœ¬
â”‚   â”œâ”€â”€ restart.sh        # é‡å¯è„šæœ¬
â”‚   â”œâ”€â”€ status.sh         # çŠ¶æ€æ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ README.md         # è„šæœ¬è¯¦ç»†æ–‡æ¡£
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ STARTUP_SCRIPTS.md  # å®Œæ•´å¯åŠ¨æŒ‡å—
â”‚
â”œâ”€â”€ logs/
â”‚   â””â”€â”€ server.pid        # æœåŠ¡ PID æ–‡ä»¶
â”‚
â”œâ”€â”€ README.md             # ä¸»æ–‡æ¡£ï¼ˆå·²æ›´æ–°ï¼‰
â””â”€â”€ README_CN.md          # ä¸­æ–‡æ–‡æ¡£ï¼ˆå·²æ›´æ–°ï¼‰
```

## æµ‹è¯•ç»“æœ / Test Results

âœ… **è„šæœ¬æ‰§è¡Œæƒé™**: å·²è®¾ç½®
âœ… **æ¨¡å—è¿è¡Œæ–¹å¼**: å·²ä¿®å¤
âœ… **æ–‡æ¡£æ›´æ–°**: å·²å®Œæˆ
âœ… **çŠ¶æ€æ£€æŸ¥è„šæœ¬**: å·²æµ‹è¯•

## ä½¿ç”¨ç¤ºä¾‹ / Usage Examples

### ç¤ºä¾‹ 1: é¦–æ¬¡å¯åŠ¨

```bash
$ ./scripts/start.sh

======================================================================
ğŸš€ KnowledgeWeaver å¯åŠ¨è„šæœ¬
======================================================================
â„¹ æ­¥éª¤ 1/4: æ£€æŸ¥ Python ç¯å¢ƒ...
âœ“ Python ç‰ˆæœ¬: 3.11.5
â„¹ æ­¥éª¤ 2/4: æ£€æŸ¥ç¯å¢ƒé…ç½®...
âœ“ .env é…ç½®æ–‡ä»¶å­˜åœ¨
â„¹ æ­¥éª¤ 3/4: æ£€æŸ¥ Python ä¾èµ–...
âœ“ Python ä¾èµ–å·²å®‰è£…
â„¹ æ­¥éª¤ 4/4: æ£€æŸ¥ Neo4j çŠ¶æ€...
âœ“ Neo4j è¿è¡Œä¸­ (bolt://localhost:7687)
â„¹ åˆ›å»ºæ•°æ®ç›®å½•...
âœ“ æ•°æ®ç›®å½•å·²å°±ç»ª
â„¹ æ£€æŸ¥ç«¯å£ 9621...
âœ“ ç«¯å£ 9621 å¯ç”¨
======================================================================
ğŸŒŸ å¯åŠ¨æœåŠ¡
======================================================================
â„¹ æ­£åœ¨å¯åŠ¨ KnowledgeWeaver æœåŠ¡...
âœ“ æœåŠ¡å¯åŠ¨æˆåŠŸï¼
======================================================================
ğŸ“ æœåŠ¡è®¿é—®ä¿¡æ¯
======================================================================
âœ“ å‰ç«¯ç•Œé¢:  http://localhost:9621
âœ“ API æ–‡æ¡£:   http://localhost:9621/docs
âœ“ å¥åº·æ£€æŸ¥:   http://localhost:9621/health

æŒ‰ Ctrl+C åœæ­¢æœåŠ¡
```

### ç¤ºä¾‹ 2: å¿«é€Ÿå¯åŠ¨

```bash
$ ./scripts/start_dev.sh

======================================================================
ğŸš€ KnowledgeWeaver å¿«é€Ÿå¯åŠ¨ (å¼€å‘æ¨¡å¼)
======================================================================

âœ“ å‰ç«¯ç•Œé¢:  http://localhost:9621
âœ“ API æ–‡æ¡£:   http://localhost:9621/docs

æŒ‰ Ctrl+C åœæ­¢æœåŠ¡

INFO:     Started server process [12345]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:9621 (Press CTRL+C to quit)
```

### ç¤ºä¾‹ 3: æŸ¥çœ‹çŠ¶æ€

```bash
$ ./scripts/status.sh

======================================================================
ğŸ“Š KnowledgeWeaver æœåŠ¡çŠ¶æ€
======================================================================

âœ“ åç«¯æœåŠ¡è¿è¡Œä¸­ (PID: 12345)

è®¿é—®åœ°å€:
  â€¢ å‰ç«¯ç•Œé¢: http://localhost:9621
  â€¢ API æ–‡æ¡£:  http://localhost:9621/docs
  â€¢ å¥åº·æ£€æŸ¥: http://localhost:9621/health

â„¹ æ­£åœ¨è¿›è¡Œå¥åº·æ£€æŸ¥...
âœ“ å¥åº·æ£€æŸ¥é€šè¿‡
  å“åº”: {"status":"healthy","timestamp":"2026-01-29T12:34:56"}

âœ“ Neo4j è¿è¡Œä¸­ (bolt://localhost:7687)
```

### ç¤ºä¾‹ 4: åœæ­¢æœåŠ¡

```bash
$ ./scripts/stop.sh

åœæ­¢ KnowledgeWeaver æœåŠ¡...

âœ“ æœåŠ¡å·²åœæ­¢ (PID: 12345)
```

### ç¤ºä¾‹ 5: é‡å¯æœåŠ¡

```bash
$ ./scripts/restart.sh

ğŸ”„ é‡å¯ KnowledgeWeaver æœåŠ¡

åœæ­¢ KnowledgeWeaver æœåŠ¡...
âœ“ æœåŠ¡å·²åœæ­¢ (PID: 12345)

======================================================================
ğŸš€ KnowledgeWeaver å¯åŠ¨è„šæœ¬
======================================================================
...
```

## å¸¸è§é—®é¢˜ / FAQ

### Q: ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è¿è¡Œ python server.pyï¼Ÿ

**A**: backend/server.py ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼ˆfrom .extraction import ...ï¼‰ï¼Œå¿…é¡»ä½œä¸ºæ¨¡å—è¿è¡Œï¼š
```bash
python -m backend.server  # âœ… æ­£ç¡®
cd backend && python server.py  # âŒ é”™è¯¯ï¼ˆç›¸å¯¹å¯¼å…¥å¤±è´¥ï¼‰
```

### Q: è„šæœ¬æ˜¾ç¤ºæƒé™é”™è¯¯æ€ä¹ˆåŠï¼Ÿ

**A**: èµ‹äºˆæ‰§è¡Œæƒé™ï¼š
```bash
chmod +x scripts/*.sh
```

### Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

**A**: åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹æˆ–ä¿®æ”¹ç«¯å£ï¼š
```bash
# æ–¹å¼ 1: åœæ­¢è¿›ç¨‹
lsof -ti:9621 | xargs kill

# æ–¹å¼ 2: ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘ .envï¼‰
PORT=9622
```

### Q: Neo4j æœªè¿è¡Œæ€ä¹ˆåŠï¼Ÿ

**A**: å¯åŠ¨ Neo4j æˆ–ç¦ç”¨ï¼š
```bash
# å¯åŠ¨ Neo4j (Docker)
docker run -d --name neo4j -p 7474:7474 -p 7687:7687 \
  -e NEO4J_AUTH=neo4j/password neo4j:latest

# æˆ–ç¦ç”¨ Neo4jï¼ˆç¼–è¾‘ .envï¼‰
USE_NEO4J=false
```

## ä¸‹ä¸€æ­¥ / Next Steps

1. âœ… **è¿è¡Œè„šæœ¬**: ä½¿ç”¨ `./scripts/start.sh` å¯åŠ¨æœåŠ¡
2. âœ… **è®¿é—®ç•Œé¢**: æ‰“å¼€ http://localhost:9621
3. âœ… **æŸ¥çœ‹æ–‡æ¡£**: è®¿é—® http://localhost:9621/docs
4. âœ… **ä¸Šä¼ æ–‡æ¡£**: ä½¿ç”¨ API ä¸Šä¼ å¹¶å¤„ç†æ–‡æ¡£
5. âœ… **ä½“éªŒé—®ç­”**: åœ¨ç•Œé¢ä¸­æé—®æµ‹è¯•ç³»ç»Ÿ

## å‚è€ƒæ–‡æ¡£ / References

- [scripts/README.md](scripts/README.md) - è„šæœ¬è¯¦ç»†æ–‡æ¡£
- [docs/STARTUP_SCRIPTS.md](docs/STARTUP_SCRIPTS.md) - å®Œæ•´å¯åŠ¨æŒ‡å—
- [README.md](README.md) - é¡¹ç›®ä¸»æ–‡æ¡£
- [README_CN.md](README_CN.md) - é¡¹ç›®ä¸­æ–‡æ–‡æ¡£

---

**åˆ›å»ºæ—¥æœŸ**: 2026-01-29
**ç»´æŠ¤è€…**: Sheldon
**ç‰ˆæœ¬**: 1.0.0

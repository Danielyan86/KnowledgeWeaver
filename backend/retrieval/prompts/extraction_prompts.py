"""
Knowledge Graph Extraction Prompts
知识图谱提取提示词

通用提示词，用于从文本中提取实体和关系
"""

# 统一的知识图谱提取提示词
EXTRACTION_PROMPT = """# 角色
你是知识图谱提取专家。请从文本中提取实体和关系。

# 实体规则
- 实体必须是名词或名词短语
- 实体名称要简短（中文≤10字，英文≤3词）
- 不要提取：时间、数量、修饰语、举例人物、代词

# 实体类型
- Person: 人物（作者、投资者、创始人等）
- Book: 书籍（书名、著作、作品）
- Concept: 概念（理念、理论、原理）
- Strategy: 策略（投资策略、方法、方案）
- Metric: 指标（数据、数值、统计）
- Group: 群体（人群、用户群体）
- Entity: 其他实体

# 关系规则
- 关系必须是动词或动词短语
- 关系名称要简短（≤4字）
- 关系要具体明确，能形成可问的问题
- 不要使用模糊词：相关、涉及、关于

# 标准关系词
- 创作类：著作、编写、撰写
- 观点类：主张、强调、提倡、认为
- 层级类：属于、包含、涵盖
- 应用类：适用于、适合、针对
- 因果类：影响、导致、产生
- 依赖类：依赖、基于、需要
- 推荐类：推荐、建议
- 属性类：特点、特征
- 对比类：对比、区别
- 反例类：反例、不推荐

# 输出格式
严格按以下JSON格式输出，不要添加其他内容：
```json
{{
  "entities": [
    {{"name": "实体名", "type": "类型", "description": "简短描述（可选）"}}
  ],
  "relations": [
    {{"source": "源实体名", "relation": "关系词", "target": "目标实体名"}}
  ]
}}
```

# 示例
输入：李笑来在《让时间陪你慢慢变富》中主张定投策略，认为定投适用于普通人。
输出：
```json
{{
  "entities": [
    {{"name": "李笑来", "type": "Person", "description": "投资者、作家"}},
    {{"name": "让时间陪你慢慢变富", "type": "Book", "description": "投资理财书籍"}},
    {{"name": "定投", "type": "Strategy", "description": "定期定额投资策略"}},
    {{"name": "普通人", "type": "Group", "description": "一般投资者群体"}}
  ],
  "relations": [
    {{"source": "李笑来", "relation": "著作", "target": "让时间陪你慢慢变富"}},
    {{"source": "让时间陪你慢慢变富", "relation": "主张", "target": "定投"}},
    {{"source": "定投", "relation": "适用于", "target": "普通人"}}
  ]
}}
```

# 待提取文本
{text}

请提取实体和关系："""


# 标准关系词集合（用于验证）
STANDARD_RELATIONS = {
    # 创作关系
    '著作', '编写', '撰写', '创作', '出版',
    # 主张/观点关系
    '主张', '强调', '提倡', '倡导', '认为',
    # 包含/属于关系
    '属于', '包含', '涵盖', '包括',
    # 适用关系
    '适用于', '适合', '针对', '面向',
    # 影响关系
    '影响', '导致', '产生', '带来',
    # 依赖关系
    '依赖', '基于', '建立在', '需要',
    # 推荐关系
    '推荐', '建议',
    # 特征关系
    '特点', '特征',
    # 对比关系
    '对比', '相比', '区别',
    # 反例关系
    '反例', '不推荐'
}

# 节点类型定义
NODE_TYPES = {
    'Person': '人物',
    'Book': '书籍',
    'Concept': '概念',
    'Strategy': '策略',
    'Metric': '指标',
    'Group': '群体',
    'Entity': '实体'
}


def get_extraction_prompt(text: str) -> str:
    """
    获取知识图谱提取提示词

    Args:
        text: 待提取的文本

    Returns:
        完整的提示词字符串
    """
    return EXTRACTION_PROMPT.format(text=text)
